# -*- python -*-

import sys
import uuid
import logging

from twisted.python import log

from smap import core, server, driver, loader

if __name__ == '__main__':
    # start logging, and intercept any messages which are using the
    # standard library log
    log.startLogging(sys.stdout)
    observer = log.PythonLoggingObserver()
    observer.start()
    logging.basicConfig(screenLevel=logging.INFO)

    if len(sys.argv) == 1:
        print >>sys.stderr, "\n\t%s <conf file>\n" % sys.argv[0]
        sys.exit(1)
    
    inst = loader.load(sys.argv[1])
    server.run(inst)
